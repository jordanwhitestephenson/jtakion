(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"/vcS":function(t,e,a){"use strict";a.d(e,"a",function(){return O}),a.d(e,"b",function(){return u}),a.d(e,"c",function(){return i}),a.d(e,"d",function(){return m}),a.d(e,"e",function(){return f}),a.d(e,"f",function(){return l}),a.d(e,"g",function(){return b}),a.d(e,"h",function(){return A}),a.d(e,"i",function(){return w}),a.d(e,"j",function(){return v}),a.d(e,"k",function(){return r}),a.d(e,"l",function(){return d}),a.d(e,"m",function(){return p}),a.d(e,"n",function(){return g}),a.d(e,"o",function(){return S}),a.d(e,"p",function(){return y}),a.d(e,"q",function(){return c}),a.d(e,"r",function(){return j}),a.d(e,"s",function(){return h}),a.d(e,"t",function(){return s}),a.d(e,"u",function(){return o}),a.d(e,"v",function(){return n});const n="username",i="email",s="code",r="phone",o="password",u="country-dial-code-select",c="+1",h="amplify-auth-source",l="amplify-redirected-from-hosted-ui",d="amplify-authenticator-authState",f="Phone number can not be empty",m="No Auth module found, please ensure @aws-amplify/auth is imported",g="No Storage module found, please ensure @aws-amplify/storage is imported",p="No Interactions module found, please ensure @aws-amplify/interactions is imported",b="SETUP_TOTP",S="User has not set up software token mfa",y="User has not verified software token mfa",j="SUCCESS",O="auth",w="UI Auth",A="ToastAuthError",v="AuthStateChange"},HaBs:function(t,e,a){"use strict";a.r(e),a.d(e,"amplify_authenticator",function(){return f});var n=a("bRKV"),i=a("Nt7R"),s=a("Qycn"),r=a("s1tr"),o=a("TESy"),u=a("v4IS"),c=(a("c82j"),a("/vcS")),h=a("MFbZ"),l=a("Zm4j");const d=new i.a("Authenticator"),f=class{constructor(t){Object(n.k)(this,t),this.initialAuthState=r.a.SignIn,this.handleAuthStateChange=()=>{},this.authState=r.a.Loading,this.toastMessage="",this.handleExternalAuthEvent=({payload:t})=>{switch(t.event){case"cognitoHostedUI":case"signIn":Object(l.a)(t.data,h.d);break;case"cognitoHostedUI_failure":case"parsingUrl_failure":case"signOut":case"customGreetingSignOut":return Object(h.d)(this.initialAuthState)}},this.handleToastEvent=({payload:t})=>{switch(t.event){case c.h:t.message&&(this.toastMessage=t.message)}}}async componentWillLoad(){Object(h.h)((t,e)=>{this.onAuthStateChange(t,e),this.toastMessage=""}),s.a.listen(c.i,this.handleToastEvent),s.a.listen(c.a,this.handleExternalAuthEvent),Object(o.j)("amplify-authenticator");const t=localStorage.getItem(c.f);localStorage.removeItem(c.f),"true"!==t&&await this.checkUser()}async checkUser(){if(!u.a||"function"!=typeof u.a.currentAuthenticatedUser)throw new Error(c.d);return u.a.currentAuthenticatedUser().then(t=>{Object(h.d)(r.a.SignedIn,t)}).catch(async()=>{let t=null;try{t=localStorage.getItem(c.l)}catch(e){d.debug("Failed to get the auth state from local storage",e)}try{t===r.a.SignedIn&&await u.a.signOut(),Object(h.d)(this.initialAuthState)}catch(e){d.debug("Failed to sign out",e)}})}async onAuthStateChange(t,e){if(void 0===t)return d.error("nextAuthState cannot be undefined");d.info("Inside onAuthStateChange Method current authState:",this.authState),this.authState=t===r.a.SignedOut?this.initialAuthState:t,this.authData=e,this.authData&&d.log("Auth Data was set:",this.authData),this.authState===t&&(this.handleAuthStateChange(this.authState,this.authData),d.info("authState has been updated to "+this.authState))}renderAuthComponent(t){switch(t){case r.a.SignIn:return Object(n.i)("slot",{name:"sign-in"},Object(n.i)("amplify-sign-in",{federated:this.federated,usernameAlias:this.usernameAlias}));case r.a.ConfirmSignIn:return Object(n.i)("slot",{name:"confirm-sign-in"},Object(n.i)("amplify-confirm-sign-in",{user:this.authData}));case r.a.SignUp:return Object(n.i)("slot",{name:"sign-up"},Object(n.i)("amplify-sign-up",{usernameAlias:this.usernameAlias}));case r.a.ConfirmSignUp:return Object(n.i)("slot",{name:"confirm-sign-up"},Object(n.i)("amplify-confirm-sign-up",{user:this.authData,usernameAlias:this.usernameAlias}));case r.a.ForgotPassword:return Object(n.i)("slot",{name:"forgot-password"},Object(n.i)("amplify-forgot-password",{usernameAlias:this.usernameAlias}));case r.a.ResetPassword:return Object(n.i)("slot",{name:"require-new-password"},Object(n.i)("amplify-require-new-password",{user:this.authData}));case r.a.VerifyContact:return Object(n.i)("slot",{name:"verify-contact"},Object(n.i)("amplify-verify-contact",{user:this.authData}));case r.a.TOTPSetup:return Object(n.i)("slot",{name:"totp-setup"},Object(n.i)("amplify-totp-setup",{user:this.authData}));case r.a.Loading:return Object(n.i)("slot",{name:"loading"},Object(n.i)("div",null,"Loading..."));case r.a.SignedIn:return[Object(n.i)("slot",{name:"greetings"}),Object(n.i)("slot",null)];default:throw new Error("Unhandled auth state: "+t)}}componentWillUnload(){return s.a.remove(c.a,this.handleExternalAuthEvent),s.a.remove(c.i,this.handleToastEvent),h.h}render(){return Object(n.i)(n.b,null,this.toastMessage?Object(n.i)("amplify-toast",{message:this.toastMessage,handleClose:()=>{this.toastMessage=""},"data-test":"authenticator-error"}):null,this.authState===r.a.SignedIn?this.renderAuthComponent(this.authState):Object(n.i)("div",{class:"auth-container"},this.renderAuthComponent(this.authState)))}};f.style=":host{--background-color:var(--amplify-background-color);--width:28.75rem;--min-width:20rem;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;--box-shadow:1px 1px 4px 0 rgba(0, 0, 0, 0.15);--border-radius:6px;--padding:35px 40px;--margin-bottom:20px;--container-height:100vh;--container-display:flex;--container-justify:center;--container-align:center}.auth-container{display:var(--container-display);-ms-flex-pack:var(--container-justify);justify-content:var(--container-justify);-ms-flex-align:var(--container-align);align-items:var(--container-align);min-height:var(--container-height)}"}}]);